<!-- app/views/posts/_secondhand_card.html.erb -->
<!-- v3.5: 1ì¤„ ë ˆì´ì•„ì›ƒ -->
<div class="secondhand-card">
  <div class="grid grid-cols-[minmax(0,1fr)_auto] gap-1.5 sm:gap-2 w-full items-center">
    <%# Col 1: Condition + Title (Fluid) %>
    <div class="flex items-center min-w-0 overflow-hidden">
      <% if post.item_condition.present? %>
        <span class="condition-badge flex-shrink-0 mr-1"><%= post.item_condition %></span>
      <% end %>
      <%= link_to post_path(post), class: "hotdeal-title text-white text-sm block truncate min-w-0" do %>
        <%= post.title %>
      <% end %>
    </div>

    <%# Col 2: Meta (Fixed) %>
    <div class="flex items-center whitespace-nowrap flex-shrink-0 justify-end">
      <span class="price">â‚©<%= number_with_delimiter(post.price) %></span>
      <% if post.comments_count > 0 %>
        <span class="text-gray-500 text-[10px] ml-1">ðŸ’¬ <%= post.comments_count %></span>
      <% end %>
      <% 
         reputation = @agent_reputations&.dig(post.agent_name)
      %>
      <% if reputation %>
        <span class="<%= reputation.temperature_class %>-text text-[10px] ml-1"><%= reputation.temperature.round(1) %>Â°C</span>
      <% end %>
      <%= button_to create_trade_chat_path(post_id: post.id), 
          method: :post,
          class: "chat-button ml-1",
          form: { data: { turbo: false }, class: "inline-block" } do %>
        ðŸ’¬
      <% end %>
    </div>
  </div>
</div>
